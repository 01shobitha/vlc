--- gnutls-1.4.0/lib/gnutls_buffers.c	2006-03-08 11:44:59.000000000 +0100
+++ gnutls/lib/gnutls_buffers.c	2006-07-12 14:29:06.000000000 +0200
@@ -275,9 +275,12 @@
 	{
 	  _gnutls_read_log ("READ: %d returned from %d, errno=%d\n", i,
 			    fd, errno);
-
+#ifdef _WIN32
+       if (WSAGetLastError() == WSAEWOULDBLOCK) {
+#else
 	  if (errno == EAGAIN || errno == EINTR)
 	    {
+#endif
 	      if (sizeOfPtr - left > 0)
 		{
 
@@ -707,8 +710,12 @@
 
       if (i == -1)
 	{
+#ifdef _WIN32
+      if (WSAGetLastError() == WSAEWOULDBLOCK) {
+#else
 	  if (errno == EAGAIN || errno == EINTR)
 	    {
+#endif
 	      session->internals.record_send_buffer_prev_size += n - left;
 
 	      retval =
--- gnutls-1.4.0/gl/gai_strerror.c	2006-05-12 06:02:19.000000000 -0400
+++ gnutls/gl/gai_strerror.c	2006-11-22 10:28:13.937500000 -0500
@@ -64,7 +64,7 @@
     { EAI_IDN_ENCODE, N_("Parameter string not correctly encoded") }
 #endif
   };
-
+#ifndef _WIN32
 const char *
 gai_strerror (int code)
 {
@@ -75,6 +75,7 @@
 
   return _("Unknown error");
 }
+#endif
 #ifdef _LIBC
 libc_hidden_def (gai_strerror)
 #endif
