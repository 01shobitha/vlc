--- /tmp/goom2k4-dev15-pre/configure.in	2004-03-27 18:15:05.000000000 +0100
+++ configure.in	2004-05-08 21:35:25.000000000 +0200
@@ -1,6 +1,5 @@
 AC_INIT(README)
 
-AM_DISABLE_STATIC
 AM_INIT_AUTOMAKE(SDL_Goom, 2k4)
 
 AM_PROG_LIBTOOL
@@ -9,69 +8,11 @@
 
 AC_C_BIGENDIAN
 
-dnl AM_PATH_XMMS(0.9.5.1,LIBS=$XMMS_LIBS, [
-dnl    echo "*** ^^^ IGNORE THE ABOVE WARNING MESSAGE IF YOU HAVE NOT PATCHED XMMS"
-dnl    echo "*** ^^^ WITH THE xmms-config patch!"
-dnl    echo "*** xmms-config was not found in your path; guessing values for CFLAGS"
-dnl    echo "*** and libs."
-
-    AM_PATH_GLIB(1.2.2,,AC_MSG_ERROR([*** GLIB >= 1.2.2 not installed - please install first ***]))
-    AM_PATH_GTK(1.2.2,,AC_MSG_ERROR([*** GTK+ >= 1.2.2 not installed - please install first ***]),gthread)
-
-    LIBS="$GTK_LIBS -lxmms"
-    CFLAGS="$GTK_CFLAGS -I$prefix/include/xmms"
-
-    AC_TRY_COMPILE(xmms/plugin.h, , AC_MSG_ERROR([*** XMMS header files (xmms-devel) not installed - please install first ***]))
-    AC_PREFIX_PROGRAM(xmms)
-  
-    if test "$prefix" = "/usr/bin"; then # happens if xmms is in /usr/bin/X11
-	prefix=/usr
-    fi
-
-    if test "$prefix" = "/usr/X11R6"; then # happens if xmms is in /usr/X11R6/bin
-	prefix=/usr
-    fi
-
-    echo "prefix set to $prefix"
-
-    XMMS_LIBS="$GTK_LIBS -lxmms"
-    XMMS_CFLAGS="$GTK_CFLAGS -I$prefix/include/xmms"
-    XMMS_PLUGIN_DIR="$prefix/lib/xmms"
-    XMMS_VISUALIZATION_PLUGIN_DIR="$XMMS_PLUGIN_DIR/Visualization"
-    XMMS_DATA_DIR="$prefix/share/xmms"
-
-    AC_SUBST(XMMS_LIBS)    
-    AC_SUBST(XMMS_CFLAGS)
-    AC_SUBST(XMMS_PLUGIN_DIR)
-    AC_SUBST(XMMS_VISUALIZATION_PLUGIN_DIR)
-    AC_SUBST(XMMS_DATA_DIR)
-dnl ])
-
-CFLAGS="$CFLAGS $GTK_CFLAGS"
-AC_SUBST(GTK_LIBS)
+dnl AC_SUBST(GTK_LIBS)
 
-AC_CHECK_HEADER(pthread.h,,AC_MSG_ERROR([*** POSIX thread support not installed - please install first ***]))
-
-PTHREAD_LIBS=error
-AC_CHECK_LIB(pthread, pthread_attr_init, PTHREAD_LIBS="-lpthread")
-
-dnl SDL_LIBS=error
-dnl AC_CHECK_LIB(SDL, main, SDL_LIBS=-lSDL)
 dnl AC_SUBST(SDL_LIBS)
 
-if test "x$PTHREAD_LIBS" = xerror; then
-    AC_CHECK_LIB(pthreads, pthread_attr_init, PTHREAD_LIBS="-lpthreads")
-fi
-
-if test "x$PTHREAD_LIBS" = xerror; then
-    AC_CHECK_LIB(c_r, pthread_attr_init, PTHREAD_LIBS="-lc_r")
-fi
-
-if test "x$PTHREAD_LIBS" = xerror; then
-    AC_CHECK_FUNC(pthread_attr_init, PTHREAD_LIBS="")
-fi
-
-AC_SUBST(PTHREAD_LIBS)
+dnl AC_SUBST(PTHREAD_LIBS)
 
 dnl rm -f mmx_zoom.s
 case "$host" in
--- /tmp/goom2k4-dev15-pre/src/Makefile.am	2004-03-27 19:07:40.000000000 +0100
+++ src/Makefile.am	2004-05-08 20:58:43.000000000 +0200
@@ -1,18 +1,3 @@
-# the xmms plugin
-xmms_lib_LTLIBRARIES = libxmmsgoom2.la
-
-xmms_libdir = @XMMS_PLUGIN_DIR@/Visualization
-
-libxmmsgoom2_la_LDFLAGS = -module -avoid-version
-xmms_LIBS = -L. -L$(prefix)/lib @XMMS_LIBS@
-
-xmms_INCLUDES = $(all_includes)\
-	-I$(top_srcdir)
-
-xmms_CFLAGS = -O9 -g -DDATADIR=\"@XMMS_DATA_DIR@\" @XMMS_CFLAGS@ -Wall
-
-libxmmsgoom2_la_SOURCES = xmms_goom.c
-
 # libgoom2
 goom2_lib_LTLIBRARIES = libgoom2.la
 
@@ -31,17 +16,3 @@
 libgoom2_la_SOURCES = \
 goom_tools.c mmx.c xmmx.c config_param.c convolve_fx.c filters.c flying_stars_fx.c gfontlib.c gfontrle.c goom_core.c graphic.c ifs.c lines.c mathtools.c sound_tester.c surf3d.c surface.c tentacle3d.c plugin_info.c v3d.c drawmethods.c goom_script.c goom_hash.c goom_script_scanner.c goom_script_scanner.tab.c cpu_info.c
 
-# the goom2 stand alone program
-bin_PROGRAMS = goom2
-
-LIBS = -L. -L$(prefix)/lib `sdl-config --libs` @XMMS_LIBS@
-
-INCLUDES = $(all_includes)\
-		-I$(top_srcdir)
-
-CFLAGS = -O9 -g `sdl-config --cflags` @XMMS_CFLAGS@ -Wall
-
-# FIXME, link to libgoom
-goom2_SOURCES = \
-config_param.c convolve_fx.c filters.c flying_stars_fx.c frame_rate_tester.c gfontlib.c gfontrle.c gmtimer.c goom_core.c graphic.c gtk-callbacks.c gtk-interface.c gtk-support.c ifs.c lines.c mathtools.c pixeldoubler.c readme.c sdl_goom.c sdl_pixeldoubler.c sound_tester.c surf3d.c surface.c tentacle3d.c xmms_goom.c mmx.c xmmx.c goom_tools.c plugin_info.c v3d.c drawmethods.c goom_script.c goom_hash.c goom_script_scanner.c goom_script_scanner.tab.c cpu_info.c
-
--- /tmp/goom2k4-dev15-pre/src/filters.c	2004-03-27 18:15:05.000000000 +0100
+++ src/filters.c	2004-05-09 11:57:07.000000000 +0200
@@ -199,8 +199,8 @@
     /* Noise */
     if (data->noisify)
     {
-        vx += (((float)random()) / ((float)RAND_MAX) - 0.5f) / 50.0f;
-        vy += (((float)random()) / ((float)RAND_MAX) - 0.5f) / 50.0f;
+        vx += (((float)rand()) / ((float)RAND_MAX) - 0.5f) / 50.0f;
+        vy += (((float)rand()) / ((float)RAND_MAX) - 0.5f) / 50.0f;
     }
     
     /* Hypercos */
--- /tmp/goom2k4-dev15-pre/src/goom_core.c	2004-03-27 18:15:05.000000000 +0100
+++ src/goom_core.c	2004-05-09 11:50:23.000000000 +0200
@@ -39,11 +39,11 @@
 static void init_buffers(PluginInfo *goomInfo, int buffsize)
 {
     goomInfo->pixel = (guint32 *) malloc (buffsize * sizeof (guint32) + 128);
-    bzero (goomInfo->pixel, buffsize * sizeof (guint32) + 128);
+    memset (goomInfo->pixel, 0, buffsize * sizeof (guint32) + 128);
     goomInfo->back = (guint32 *) malloc (buffsize * sizeof (guint32) + 128);
-    bzero (goomInfo->back, buffsize * sizeof (guint32) + 128);
+    memset (goomInfo->back, 0, buffsize * sizeof (guint32) + 128);
     goomInfo->conv = (Pixel *) malloc (buffsize * sizeof (guint32) + 128);
-    bzero (goomInfo->conv, buffsize * sizeof (guint32) + 128);
+    memset (goomInfo->conv, 0, buffsize * sizeof (guint32) + 128);
     
     goomInfo->p1 = (Pixel *) ((1 + ((unsigned int) (goomInfo->pixel)) / 128) * 128);
     goomInfo->p2 = (Pixel *) ((1 + ((unsigned int) (goomInfo->back)) / 128) * 128);
