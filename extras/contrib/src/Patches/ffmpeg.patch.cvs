diff -ru ffmpeg-original/libavcodec/eval.c ffmpeg/libavcodec/eval.c
--- ffmpeg-original/libavcodec/eval.c	Wed Feb 18 12:49:30 2004
+++ ffmpeg/libavcodec/eval.c	Fri Jul 23 11:39:29 2004
@@ -34,6 +34,8 @@
 #include <string.h>
 #include <math.h>
 
+/* Meuuh power */
+#undef NAN
 #ifndef NAN
   #define NAN 0
 #endif
diff -ru ffmpeg-original/libavcodec/msmpeg4.c ffmpeg/libavcodec/msmpeg4.c
--- ffmpeg-original/libavcodec/msmpeg4.c	Tue May 25 18:07:24 2004
+++ ffmpeg/libavcodec/msmpeg4.c	Fri Jul 23 11:49:38 2004
@@ -716,7 +716,7 @@
        necessitate to modify mpegvideo.c. The problem comes from the
        fact they decided to store the quantized DC (which would lead
        to problems if Q could vary !) */
-#if defined ARCH_X86 && !defined PIC
+#if defined ARCH_X86 && !defined PIC && !defined __PIC__
     asm volatile(
         "movl %3, %%eax		\n\t"
 	"shrl $1, %%eax		\n\t"
diff -ru ffmpeg-original/libavformat/tcp.c ffmpeg/libavformat/tcp.c
--- ffmpeg-original/libavformat/tcp.c	Sat Jun 19 03:59:34 2004
+++ ffmpeg/libavformat/tcp.c	Fri Jul 23 11:52:23 2004
@@ -32,6 +32,7 @@
 #include <netdb.h>
 #include <sys/time.h>
 #include <fcntl.h>
+#define socklen_t int
 
 typedef struct TCPContext {
     int fd;
@@ -120,11 +121,13 @@
                 break;
         }
         
+#ifndef __BEOS__
         /* test error */
         optlen = sizeof(ret);
         getsockopt (fd, SOL_SOCKET, SO_ERROR, &ret, &optlen);
         if (ret != 0)
             goto fail;
+#endif
     }
     s->fd = fd;
     return 0;
